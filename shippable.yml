language: go

go:
  - 1.2

env:
  - CI_REPORT=shippable/testresults/junit.xml
  - COVERALLS_TOKEN=xfsZpmhzDFYGsEJJ2T8VodmEo0muklBWA

before_install:
  - make install
  - make devinstall
  - mkdir -p $GOPATH/src/github.com/intuition-io
  - ln -sfn $PWD $GOPATH/src/github.com/intuition-io/terminal

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

# TODO Add COVERALLS_TOKEN and make coverage
script:
  - make test TESTARGS="-coverprofile=coverage.out -covermode count ./"
  - make coverage
